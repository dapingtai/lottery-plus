# Vue2 抽獎程式(Plus版-含獎項權重調整)
## 致謝
基於[vasttian/lottery](https://github.com/vasttian/lottery)作為基礎進行加強和優化，特此感謝原作者的辛勤付出。
由於作者標註機率公平，故特此獨立出來，並將機率設置為可權重調整，以符合實際需求。

## 概述
這是一個基於Vue2開發的抽獎程式，具有基本抽獎和帶權重抽獎兩種模式。程式允許配置多個獎項並支持為每個號碼設置權重，實現靈活的抽獎需求。

## 核心抽獎邏輯

### 基本抽獎邏輯 (algorithm.js)
基本抽獎使用純隨機算法，主要通過以下函數實現：

1. `randomNum(minNum, maxNum)`: 
   - 生成指定範圍內的隨機數
   - 使用Math.random()確保每個數字有相同的被選中機率
   - 機率計算: 每個號碼被抽中的機率都是 1/(maxNum-minNum+1)

2. `lotteryHandler(total, won, num)`:
   - total: 總參與人數
   - won: 已中獎名單
   - num: 本次抽取人數
   - 從剩餘未中獎者中隨機抽取，確保公平性
   - 機率計算: 每個剩餘號碼被抽中的機率是 1/(total-won.length)

### 權重抽獎邏輯 (algorithm-weighted.js)

1. `weightedRandomNum(numbers, weights)`:
   實現帶權重的隨機選擇，採用累積概率法：
   - numbers: 可選號碼列表
   - weights: 每個號碼對應的權重值(0-1000)
   
   算法步驟：
   1. 過濾掉權重為0的號碼
   2. 計算所有有效號碼的權重總和
   3. 生成0到權重總和之間的隨機數
   4. 依序減去每個號碼的權重值，首個使結果小於等於0的號碼即為中獎號碼

   機率計算：
   - 號碼被抽中的機率 = 該號碼權重值 / 所有參與號碼權重總和
   - 權重為0的號碼被抽中機率為0

2. `weightedLotteryHandler(total, won, num, weights)`:
   - 在基本抽獎基礎上加入權重因素
   - 確保已中獎者不會重複被選中
   - 支持批量抽取指定數量的中獎者

## 權重配置實現 (WeightConfig.vue)

1. 配置範圍：
   - 每個號碼可設置0-1000的權重值
   - 預設值為1（所有號碼等機率）
   - 設置為0時該號碼不參與抽獎

2. 數據持久化：
   - 使用localStorage保存權重配置
   - 頁面重載時自動恢復已保存的配置

3. 配置示例：
   ```javascript
   {
     1: 100,  // 號碼1的權重為100
     2: 50,   // 號碼2的權重為50
     3: 0     // 號碼3不參與抽獎
   }
   ```

## 機率計算示例

1. 基本抽獎模式：
   - 總人數100人，已抽出10人
   - 每個未中獎號碼被抽中機率 = 1/90 ≈ 1.11%
   - 完全隨機，公平分配

2. 權重抽獎模式：
   示例配置：
   - 號碼1權重為100
   - 號碼2權重為50
   - 號碼3權重為0
   - 其他號碼預設權重為1
   
   機率計算：
   - 號碼1被抽中機率 = 100/(100+50+1+...+1) ≈ 50%
   - 號碼2被抽中機率 = 50/(100+50+1+...+1) ≈ 25%
   - 號碼3被抽中機率 = 0%
   - 其他號碼被抽中機率 = 1/(100+50+1+...+1) ≈ 0.5%

## 注意事項
1. 已中獎的號碼會被自動排除，不會重複中獎
2. 權重值越大，該號碼被抽中的機率越高
3. 權重設置為0的號碼不會參與抽獎
4. 所有號碼權重為0時，預設返回最後一個有效號碼
5. 權重設置立即生效，影響後續抽獎結果